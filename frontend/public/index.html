<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#A78BFA" />
    <meta name="description" content="TriDo - Task Management System with Push Notifications" />
    
    <!-- Prevent caching for PWA updates -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Apple Touch Icons -->
    <!-- PWA Configuration -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TriDo">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="TriDo">
    
    <!-- Apple Touch Icons with rounded corners -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' rx='26' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' rx='26' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="152x152" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' rx='26' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' rx='26' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="120x120" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' rx='26' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' rx='26' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="76x76" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' rx='26' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' rx='26' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    
    <!-- Favicon variations -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' rx='26' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' rx='26' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    <link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' rx='26' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' rx='26' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#A78BFA">
    <meta name="msapplication-TileImage" content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Cdefs%3E%3ClinearGradient id='bg' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0' stop-color='%23F4D35E'/%3E%3Cstop offset='0.5' stop-color='%23A78BFA'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='120' height='120' fill='url(%23bg)'/%3E%3Crect y='60' width='120' height='60' fill='%23000'/%3E%3Cpath d='M45 75L55 85L75 65' stroke='white' stroke-width='6' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    
    <title>TriDo - Task Manager</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- Service Worker Registration - Development Friendly -->
    <script>
      if ('serviceWorker' in navigator) {
        // Check if we're in development mode
        const isDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        
        if (isDev) {
          console.log('üõ†Ô∏è Development mode detected - Service Worker disabled');
          // Unregister any existing service workers in development
          navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
              console.log('üóëÔ∏è Unregistering SW for development:', registration);
              registration.unregister();
            }
          });
        } else {
          // Production mode - register service worker normally
          console.log('üè≠ Production mode - Service Worker enabled');
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js', { 
              updateViaCache: 'none',
              scope: '/'
            })
              .then((registration) => {
                console.log('‚úÖ SW registered:', registration);
                registration.update();
              })
              .catch((registrationError) => {
                console.log('‚ùå SW registration failed:', registrationError);
              });
          });
        }
      }
    </script>
  </body>
</html>
